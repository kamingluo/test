(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0738bebe"],{"0a49":function(t,e,l){var i=l("9b43"),a=l("626a"),o=l("4bf8"),s=l("9def"),n=l("cd1c");t.exports=function(t,e){var l=1==t,r=2==t,c=3==t,d=4==t,u=6==t,b=5==t||u,f=e||n;return function(e,n,p){for(var h,v,m=o(e),_=a(m),g=i(n,p,3),w=s(_.length),y=0,x=l?f(e,w):r?f(e,0):void 0;w>y;y++)if((b||y in _)&&(h=_[y],v=g(h,y,m),t))if(l)x[y]=v;else if(v)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:x.push(h)}else if(d)return!1;return u?-1:c||d?d:x}}},1169:function(t,e,l){var i=l("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"12fb":function(t,e,l){"use strict";var i=l("1894"),a=l.n(i);a.a},1894:function(t,e,l){},2811:function(t,e,l){"use strict";l.r(e);var i=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"table"},[l("div",{staticClass:"crumbs"},[l("el-breadcrumb",{attrs:{separator:"/"}},[l("el-breadcrumb-item",[l("i",{staticClass:"el-icon-lx-cascades"}),t._v("用例步骤管理")])],1)],1),l("div",{staticClass:"container"},[l("div",{staticClass:"handle-box"},[l("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary"},on:{click:t.addStepForm}},[t._v("新增数据")])],1),l("div",{staticClass:"handle-box"},[l("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:t.delAll}},[t._v("批量删除")]),l("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"筛选省份"},model:{value:t.select_cate,callback:function(e){t.select_cate=e},expression:"select_cate"}},[l("el-option",{key:"1",attrs:{label:"广东省",value:"广东省"}}),l("el-option",{key:"2",attrs:{label:"湖南省",value:"湖南省"}})],1),l("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}}),l("el-button",{attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("搜索")])],1),l("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),l("el-table-column",{attrs:{prop:"step_id",label:"步骤id",width:"80"}}),l("el-table-column",{attrs:{prop:"step_title",label:"步骤标题",width:"150"}}),l("el-table-column",{attrs:{prop:"url",label:"url",width:"180"}}),l("el-table-column",{attrs:{prop:"is_run",label:"运行开关",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(l){t.changeSwicth(l,e.row)}},model:{value:e.row.is_run,callback:function(l){t.$set(e.row,"is_run",l)},expression:"scope.row.is_run"}})]}}])}),l("el-table-column",{attrs:{prop:"method",label:"请求方法",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-label",[t._v(" "+t._s(1===e.row.method?"Post":"Get"))])]}}])}),l("el-table-column",{attrs:{prop:"prepose_body_step",label:"body前置步骤",width:"120"}}),l("el-table-column",{attrs:{prop:"prepose_body_key",label:"body依赖字段",width:"120"}}),l("el-table-column",{attrs:{prop:"return_key",label:"返回字段",width:"140"}}),l("el-table-column",{attrs:{prop:"return_value",label:"返回参数",width:"180"}}),l("el-table-column",{attrs:{prop:"result",label:"测试结果",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-label",[t._v(t._s(0===e.row.result?"停止执行":1==e.row.result?"通过":"失败"))])]}}])}),l("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(l){t.logEdit(e.$index,e.row.step_id)}}},[t._v("查看日志")]),l("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(l){t.goStepForm(e.row)}}},[t._v("编辑")]),l("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(l){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),l("div",{staticClass:"pagination"},[l("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:1e3},on:{"current-change":t.handleCurrentChange}})],1)],1),l("el-dialog",{attrs:{title:"编辑",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[l("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"测试项目"}},[l("el-input",{model:{value:t.form.project,callback:function(e){t.$set(t.form,"project",e)},expression:"form.project"}})],1),l("el-form-item",{attrs:{label:"测试标题"}},[l("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[l("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)]),l("el-dialog",{attrs:{title:"提示",visible:t.batchRunVisible,width:"300px",center:""},on:{"update:visible":function(e){t.batchRunVisible=e}}},[l("div",{staticClass:"del-dialog-cnt"},[t._v("是否确定批量运行？")]),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.batchRunVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.definiteRun}},[t._v("确 定")])],1)]),l("el-dialog",{attrs:{title:"日志",visible:t.logVisible,width:"90%"},on:{"update:visible":function(e){t.logVisible=e}}},[l("el-form",{ref:"form",attrs:{model:t.logdata,"label-width":"120px"}},[l("div",[l("el-text",[t._v("步骤id: "+t._s(t.logdata.step_id)),l("br"),l("br")]),l("el-text",[t._v("请求地址: "+t._s(t.logdata.url)),l("br"),l("br")]),l("el-text",[t._v("请求体: "+t._s(t.logdata.body)),l("br"),l("br")]),l("el-text",[t._v("HTTP状态码: "+t._s(t.logdata.id)),l("br"),l("br")]),l("el-text",[t._v("预期code值: "+t._s(t.logdata.expect_code)),l("br"),l("br")]),l("el-text",[t._v("实际code值: "+t._s(t.logdata.id)),l("br"),l("br")]),l("el-text",[t._v("比较结果: "+t._s(t.logdata.id)),l("br"),l("br")]),l("el-text",[t._v("预期结果: "+t._s(t.logdata.expect_result)),l("br"),l("br")]),l("el-text",[t._v("实际结果: "+t._s(t.logdata.id)),l("br"),l("br")])],1)]),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.logVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(e){t.logVisible=!1}}},[t._v("确 定")])],1)],1)],1)},a=[],o=(l("7f7f"),l("d25f"),{name:"basetable",data:function(){return{url:"./static/vuetable.json",tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,logVisible:!1,delVisible:!1,batchRunVisible:!1,form:{name:"",date:"",address:""},idx:-1,deleteid:"",stepdata:"",logdata:{}}},activated:function(){console.log("刷新页面");var t=this.$route.query;console.log("用例id",t),this.getData(t),this.case_id=t},computed:{data:function(){var t=this;return this.tableData.filter(function(e){for(var l=0;l<t.del_list.length;l++)if(e.name===t.del_list[l].name){!0;break}})}},methods:{handleCurrentChange:function(t){this.cur_page=t,this.getData()},getData:function(t){var e=this;this.url="apicase/steplist",this.$axios.post(this.url,t).then(function(t){console.log("用例步骤api返回数据1",t.data.data),e.tableData=t.data.data.rows})},add:function(){console.log("点击新增"),this.form={},this.editVisible=!0},logEdit:function(t,e){var l=this;console.log("步骤ID",e),this.url="apicase/recode_list";var i={step_id:e};this.$axios.post(this.url,i).then(function(t){console.log("测试记录数据",t.data.data),l.$message.success("运行成功")}),console.log("查看日志"),this.idx=t;var a=this.tableData[t];this.logdata=a,this.logVisible=!0},search:function(){this.is_search=!0},formatter:function(t,e){return t.address},filterTag:function(t,e){return e.tag===t},handlebatchRun:function(){console.log("点击批量运行"),this.batchRunVisible=!0},handleDelete:function(t,e){console.log("点击删除按钮",t,"删除id",e.id),this.idx=t,this.deleteid=e.id,this.delVisible=!0},delAll:function(){var t=this.multipleSelection.length,e="";this.del_list=this.del_list.concat(this.multipleSelection);for(var l=0;l<t;l++)e+=this.multipleSelection[l].name+" ";this.$message.error("删除了"+e),this.multipleSelection=[]},handleSelectionChange:function(t){this.multipleSelection=t},saveEdit:function(){this.$set(this.tableData,this.idx,this.form),console.log("提交修改信息",this.form),this.editVisible=!1,this.$message.success("操作成功")},deleteRow:function(){this.tableData.splice(this.idx,1),console.log("删除提交数据id",this.deleteid),this.$message.success("删除成功"),this.delVisible=!1},definiteRun:function(){var t=this;this.url="apicase/run";var e={case_id:"all"};this.$axios.post(this.url,e).then(function(e){console.log("批量运行返回数据",e.data.data),t.$message.success("运行成功"),t.batchRunVisible=!1})},addStepForm:function(){console.log("新增用例步骤");var t=this.case_id;this.$router.push({name:"CaseStepForm",params:t})},goStepForm:function(t){console.log("跳转测试",t);var e=t;this.$router.push({name:"CaseStepForm",params:e})}}}),s=o,n=(l("12fb"),l("2877")),r=Object(n["a"])(s,i,a,!1,null,"91aea148",null);r.options.__file="CaseStepManage.vue";e["default"]=r.exports},"7f7f":function(t,e,l){var i=l("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in a||l("9e1e")&&i(a,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},cd1c:function(t,e,l){var i=l("e853");t.exports=function(t,e){return new(i(t))(e)}},d25f:function(t,e,l){"use strict";var i=l("5ca1"),a=l("0a49")(2);i(i.P+i.F*!l("2f21")([].filter,!0),"Array",{filter:function(t){return a(this,t,arguments[1])}})},e853:function(t,e,l){var i=l("d3f4"),a=l("1169"),o=l("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}}}]);